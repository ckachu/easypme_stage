<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
		
		<!-- Form view definition -->
		<record model="ir.ui.view" id="view_l10n_pf_account_vat_declaration_form">
			<field name="name">l10n.pf.account.vat.declaration.form</field>
			<field name="model">l10n.pf.account.vat.declaration</field>
			<field name="arch" type="xml">
				<form string="Vat">
					<header>
						<button name="set_to_simulate" states="draft" string="Simulate declaration" type="object"/>
						<button name="account_chart_open_window" states="simulate" string="Show account chart" type="object"/>
						<button states="simulate" string="Show journal items" type="object"/>
						<button name="validate" states="simulate" string="Validate" type="object"/>
						<button name="set_to_draft" states="simulate" string="Back to draft" type="object"/>
						<button name="set_to_draft" states="done" string="Cancel" type="object"  groups="account.group_account_manager"/> 
						<field name="state" widget="statusbar" statusbar_visible="draft,simulate,done"/>
					</header>
					<sheet>
						<group>
							<label for="name" string="Declaration name"/>
							<h2>
								<field name="name"/>
							</h2>
							<field name="date_declaration"/>
							<field name="user_id"/>
						</group>
						<group>
							<field name="company_regime"/>
							<field name="company_vat_type"/>
						</group>
						<notebook colspan="2">
							<page string="General">
								<group>
									<group>
										<!--<field name="account_id"/>-->
										<field name="no_tahiti"/>
										<field name="company_id" on_change="on_change_company_id(company_id)"/>
										<field name="company_activity"/>
										<field name="company_phone"/>
										
										<label for="company_street" string="Address"/>
										<div>
											<field name="company_street" placeholder="Street"/>
											<field name="company_city" placeholder="City"/>
											<field name="company_country" placeholder="Country"/>
										</div>
										
										<field name="company_email"/>
										<field name="company_zip"/>
										<field name="company_bp"/>
										<field name="city_zip"/>
										
										
										<field name="fiscalyear" class="oe_inline" on_change="on_change_fiscalyear(fiscalyear)"/>
										<field name="period_from" class="oe_inline"/>
										<field name="period_to" class="oe_inline"/>
									</group>
								</group>
							</page>
							<page string="Declaration">
								<!-- Operations realisees -->
								<separator string="OPERATIONS PERFORMED" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
								<group>
									<group>
										<field name="account_sales" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="account_services" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
									</group>
									<group>
										<field name="account_exports" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="account_other" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
									</group>
								</group>
								<!-- TVA exigible -->
								<separator string="VAT DUE"/>
								<group>
									<group>
										<!--<field name="toto" />-->
										<!-- Deposit simplified regime -->
										<field name="excluding_vat_sales" attrs="{'invisible':['|',('company_regime','=','annual'),('company_regime','=','real')]}"/>
										<field name="excluding_vat_services" attrs="{'invisible':['|',('company_regime','=','annual'),('company_regime','=','real')]}"/>
										<!-- Annual simplified regime & Real regime -->
										<field name="base_reduced_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="base_intermediate_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="base_normal_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="base_regularization_to_donate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
									</group>
									<group>
										<!-- Deposit simplified regime -->
										<field name="tax_due_sales" attrs="{'invisible':['|',('company_regime','=','annual'),('company_regime','=','real')]}"/>
										<field name="tax_due_services" attrs="{'invisible':['|',('company_regime','=','annual'),('company_regime','=','real')]}"/>
										<field name="total_tax_payable" attrs="{'invisible':['|',('company_regime','=','annual'),('company_regime','=','real')]}"/>
										<!-- Annual simplified regime & Real regime -->						
										<field name="vat_due_reduced_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="vat_due_intermediate_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="vat_due_normal_rate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="vat_due_regularization_to_donate" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="total_vat_payable" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
									</group>
								</group>
								<!-- TVA deductible -->
								<separator string="VAT DEDUCTIBLE"/>
								<group>
									<group>
										<field name="vat_immobilization"/>
										<field name="vat_other_goods_services" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="vat_regularization" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
										<field name="defferal_credit"/>
										<field name="total_vat_deductible"/>
									</group>
								</group>
								<!-- Credit et TVA -->
								<separator string="CREDIT/VAT"/>
								<group>
									<group>
										<!-- Credit -->
										<field name="vat_credit" attrs="{'invisible':['|',('company_regime','=','annual')]}"/>
										<!-- Annual SR -->
										<field name="difference_deductible_payable" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="deposit" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="total_difference_deposit" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="surplus" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="reimbursement"/>
										<field name="credit_to_be_transferred" attrs="{'invisible':[('company_regime','=','deposit')]}"/>
									</group>
									<group>
										<!-- TVA Ã  payer -->
										<!-- Annual SR -->
										<field name='difference_payable_deductible' attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="obtained_reimbursement" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="total_difference_reimbursement" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<field name="net_to_pay" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>
										<!-- RR & Deposit SR -->
										<field name="net_vat_due" attrs="{'invisible':[('company_regime','=','annual')]}"/>	
									</group>
									<group>
										<field name="date"/>
										<field name="place"/>
									</group>
								</group>
								<!-- Moyens de paiement -->
								<group>
									<field name="means_of_payment"/>
								</group>
								<button name="action_fill_declaration" states="draft" string="Fill declaration" type="object" context="{'fiscalyear':fiscalyear, 'period_from': period_from, 'period_to': period_to}"/>
								<button name="%(action_l10n_pf_account_vat_fill)d" states="draft" string="Fill" type="action" context="{'fiscalyear':fiscalyear, 'period_from': period_from, 'period_to': period_to}"/>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>
				
		<!-- List view definition -->
		<record model="ir.ui.view" id="view_l10n_pf_account_vat_declaration_tree">
			<field name="name">l10n.pf.account.vat.declaration.tree</field>
			<field name="model">l10n.pf.account.vat.declaration</field>
			<field name="arch" type="xml">
				<tree string="Declaration">
					<field name="name"/>
					<field name="company_vat_type"/>
					<field name="company_regime"/>
					<field name="vat_credit"/>
					<!--<field name="net_vat_due" attrs="{'invisible':[('company_regime','=','annual')]}"/>
					<field name="net_to_pay" attrs="{'invisible':['|',('company_regime','=','deposit'),('company_regime','=','real')]}"/>-->
					<field name="means_of_payment"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		
		<!-- Action window definition -->
		<record model="ir.actions.act_window" id="action_open_view_l10n_pf_account_vat_declaration_tree">
			<field name="name">Declaration</field>
			<field name="res_model">l10n.pf.account.vat.declaration</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
				Click to create a new declaration.
				</p>
				<p>
				Blabla
				</p>
			</field>
		</record>
		
		<!-- Action menu item -->
		<menuitem 
		id="action_menu_open_view_l10n_pf_account_vat_declaration_tree"
		parent="account.menu_finance"
		name="Tax"
		sequence="1"/>
		<menuitem
		name="VAT Declaration"
		parent="action_menu_open_view_l10n_pf_account_vat_declaration_tree"
		id="sous_menu_l10n_pf_account_vat_declaration"
		action="action_open_view_l10n_pf_account_vat_declaration_tree"
		/>
		
		
    </data>
</openerp>
